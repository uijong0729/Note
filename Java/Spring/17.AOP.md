1. #### @Aspect 프록시 적용

   1. 포인트컷과 어드바이스로 구성되어있는 어드바이저 생성기능 지원
   2. AspectJ 프로젝트에서 제공하는 애노테이션이며, 스프링에서 채용한 패키지이다.

```java
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;

@Aspect
public class LogTraceAspect {
	
	private final LogTrace logTrace;

	public LogTraceAspect(LogTrace logTrace) {
		super();
		this.logTrace = logTrace;
	}
	
	/**
	 * 어드바이저는 여러개 만들 수 있다.
	 * 
	 * @Around 포인트 컷
	 * @param joinPoint
	 * @return
	 * @throws Throwable
	 */
	@Around("execution(* hello.proxy.app..*(..))")
	public Object execute(ProceedingJoinPoint joinPoint) throws Throwable{
		TraceStatus status = null;
		try {
			String message = joinPoint.getSignature().toShortString();
			status = logTrace.begin(message);
			
			// 로직 호출
			Object result = joinPoint.proceed();
			
			logTrace.end(status);
			return result;
		} catch (Exception e) {
			logTrace.exception(status, e);
			throw e;
		}
	}
}


// @Aspect 클래스를 스프링 빈으로 등록
@Configuration
@Import({AppV1Config.class, AppV2Config.class})
public class AopConfig {
	
	@Bean
	public LogTraceAspect logTraceAspect(LogTrace logTrace) {
		return new LogTraceAspect(logTrace);
	}
}
```

2. #### @Aspect 프록시

   1. 프록시 = 여러 어드바이저

   2. 어드바이저 = 포인트컷 + 어드바이스

   3. 자동 프록시 생성기(AnnotationAwareAspectJAutoProxyCreator)

      -  @Aspect를 찾아서 이것을 Advisor로 만들어준다.
      - 어드바이저를 기반으로 프록시를  생성한다.

      ![image-20220124215013458](image-20220124215013458.png)

   4. 횡단 관심사 (cross-cutting concerns)
      - 애플리케이션의 여러 기능들 사이에 걸쳐서 들어가는 관심사
      - 횡단 관심사를 전문으로 해결하는 스프링 AOP

3. #### @Aspect 어드바이저 빌더

   - @Aspect 정보를 기반으로 어드바이저를 만들고 @Aspect 어드바이저 빌더 내부 저장소에 캐시한다.

4. #### 핵심기능과 부가기능

   1. 핵심기능 : 로직
   2. 부가 기능
      - 핵심기능을 보조하기 위해 존재. 로그 추적, 트랜잭션
      - 여러 곳에서 공통으로 사용하는 부가기능 (횡단 관심사 : cross-cutting concerns)
      - 부가기능 적용문제 : 부가기능을 적용해야하는 클래스가 100개면 100개 모두에 동일한 코드를 추가해야하며, 수정시 100개 모두에 동일한 수정이 발생한다. → 일반적으로 OOP방식으로는 해결하기 어렵다.
   
5. #### Aspect

   1. Aspect : 관점
   2. AOP
      - 관점 지향 프로그래밍
      - AOP는 OOP를 대체하기 위한 것이 아니라 OOP의 부족한 횡단 관심사 처리를 보조하기 위한 목적으로 개발된 것이다.
   3. 부가기능을 어디에 적용할지 선택하는 기능을 합해서 하나의 모듈로 만든 것
   4. AspectJ 프레임워크
      - 스프링도 AOP를 지원하지만 대부분 AspectJ의 문법을 차용하고, AspectJ가 제공하는 기능의 일부만 제공한다.
      - 오류검사 및 처리, 동기화, 모니터링 및 로깅 제공
   5. 

